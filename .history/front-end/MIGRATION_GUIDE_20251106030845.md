# Migration Guide: Remove Mock Data v√† Connect Backend API

## ‚úÖ ƒê√£ ho√†n th√†nh

### 1. X√≥a Mock Data Files
- ‚ùå ƒê√£ x√≥a: `src/data/books.ts`
- ‚ùå ƒê√£ x√≥a: `src/data/series.ts`  
- ‚ùå ƒê√£ x√≥a: `src/data/categories.ts`
- ‚úÖ Gi·ªØ l·∫°i: `src/data/faqData.ts` (FAQ kh√¥ng c·∫ßn API)

### 2. T·∫°o Type Definitions
- ‚úÖ `src/types/api.ts` - Ch·ª©a t·∫•t c·∫£ types v√† mappers

### 3. T·∫°o API Configuration
- ‚úÖ `src/config/api.ts` - Axios instance v·ªõi interceptors

### 4. T·∫°o API Services
- ‚úÖ `src/services/bookService.ts` - Book API calls
- ‚úÖ `src/services/seriesService.ts` - Series API calls
- ‚úÖ `src/services/categoryService.ts` - Category API calls

### 5. Install Dependencies
- ‚úÖ Installed `axios` package

## üìã C·∫ßn C·∫≠p Nh·∫≠t

### Components c·∫ßn c·∫≠p nh·∫≠t ƒë·ªÉ s·ª≠ d·ª•ng API thay v√¨ mock data:

#### Home Components:
1. **Homepage.tsx**
   - Hi·ªán t·∫°i: `import { heroBookGroups } from "../../data/books"`
   - C·∫ßn: Fetch t·ª´ `bookService.getRandomActiveBooks()`

2. **HeroSlider.tsx**
   - Hi·ªán t·∫°i: Nh·∫≠n props t·ª´ Homepage
   - C·∫ßn: Update type t·ª´ `src/types/api`

3. **Somebooks.tsx**
   - Hi·ªán t·∫°i: `import { heroBookGroups } from "../../data/books"`
   - C·∫ßn: Fetch t·ª´ `bookService.getActiveBooks()`

4. **SomeSeries.tsx**
   - Hi·ªán t·∫°i: `import { seriesData } from "../../data/series"`
   - C·∫ßn: Fetch t·ª´ `seriesService.getActiveSeries()`

5. **BookCard.tsx**
   - Hi·ªán t·∫°i: `import type { Book } from "../../data/books"`
   - C·∫ßn: `import type { Book } from "../../types/api"`

6. **SeriesCard.tsx**
   - Hi·ªán t·∫°i: `import type { Series } from "../../data/series"`
   - C·∫ßn: `import type { Series } from "../../types/api"`

7. **Categories.tsx**
   - Hi·ªán t·∫°i: `import { categories } from "../../data/categories"`
   - C·∫ßn: Fetch t·ª´ `categoryService.getActiveSupCategories()`

#### Navbar Components:
8. **CategoryDropdown.tsx**
   - Hi·ªán t·∫°i: `import { categories } from "../../data/categories"`
   - C·∫ßn: Fetch t·ª´ `categoryService.getActiveSupCategories()`

#### Search Components:
9. **SearchSuggest.tsx**
   - Hi·ªán t·∫°i: Import t·ª´ `data/books` v√† `data/series`
   - C·∫ßn: Fetch t·ª´ services

10. **FilterSidebar.tsx**
    - Hi·ªán t·∫°i: `import { categories } from "../../data/categories"`
    - C·∫ßn: Fetch t·ª´ `categoryService.getActiveSupCategories()`

#### Pages:
11. **AllProducts.tsx**
    - Hi·ªán t·∫°i: Import t·ª´ `data/books` v√† `data/series`
    - C·∫ßn: Fetch t·ª´ services

#### Admin Components:
12. **Promotion.tsx**
    - Hi·ªán t·∫°i: `import { categories } from "../../data/categories"`
    - C·∫ßn: Fetch t·ª´ API ho·∫∑c s·ª≠ d·ª•ng admin-specific service

13. **BookManagement.tsx**
    - Hi·ªán t·∫°i: S·ª≠ d·ª•ng localStorage
    - C·∫ßn: Integrate v·ªõi backend API

14. **SeriesManagement.tsx**
    - Hi·ªán t·∫°i: S·ª≠ d·ª•ng localStorage
    - C·∫ßn: Integrate v·ªõi backend API

15. **CateManagement.tsx**
    - Hi·ªán t·∫°i: S·ª≠ d·ª•ng localStorage
    - C·∫ßn: Integrate v·ªõi backend API

### Utils c·∫ßn c·∫≠p nh·∫≠t:
16. **initAdminData.ts**
    - Hi·ªán t·∫°i: `import { mockBooksDB } from "../data/books"`
    - C·∫ßn: X√≥a ho·∫∑c fetch t·ª´ API

## üîß C√°ch c·∫≠p nh·∫≠t t·ª´ng component

### Template c∆° b·∫£n:

```typescript
// Before (Mock Data)
import { heroBookGroups } from "../../data/books";

function Component() {
  const books = heroBookGroups.flat();
  // ...
}

// After (API)
import { useState, useEffect } from "react";
import bookService from "../../services/bookService";
import type { Book } from "../../types/api";

function Component() {
  const [books, setBooks] = useState<Book[]>([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const fetchBooks = async () => {
      try {
        setLoading(true);
        const data = await bookService.getActiveBooks();
        setBooks(data);
      } catch (error) {
        console.error('Error fetching books:', error);
      } finally {
        setLoading(false);
      }
    };

    fetchBooks();
  }, []);

  if (loading) return <div>Loading...</div>;
  
  // ...
}
```

## üöÄ Environment Variables

T·∫°o file `.env` trong `front-end/`:

```env
VITE_API_BASE_URL=http://localhost:8080/bookverse/api
```

## ‚öôÔ∏è Backend Configuration

C·∫≠p nh·∫≠t CORS trong `application.yaml`:

```yaml
cors:
  allowed-origins:
    - "http://localhost:5173"
    - "http://localhost:5174"
    - "http://127.0.0.1:5173"
    - "http://127.0.0.1:5174"
```

## üìù Next Steps

1. C·∫≠p nh·∫≠t t·ª´ng component m·ªôt theo template ·ªü tr√™n
2. Test t·ª´ng component sau khi c·∫≠p nh·∫≠t
3. X√≥a initAdminData.ts ho·∫∑c refactor ƒë·ªÉ s·ª≠ d·ª•ng API
4. C·∫≠p nh·∫≠t Admin components ƒë·ªÉ s·ª≠ d·ª•ng backend API thay v√¨ localStorage
5. Remove unused imports v√† files

## üéØ Priority Order

1. **High Priority** (·∫¢nh h∆∞·ªüng tr·ª±c ti·∫øp ƒë·∫øn Home page):
   - Homepage.tsx
   - HeroSlider.tsx
   - Somebooks.tsx
   - SomeSeries.tsx
   - Categories.tsx
   - CategoryDropdown.tsx

2. **Medium Priority** (Search v√† Filter):
   - SearchSuggest.tsx
   - FilterSidebar.tsx
   - AllProducts.tsx

3. **Low Priority** (Admin - c√≥ th·ªÉ l√†m sau):
   - Admin components (BookManagement, SeriesManagement, CateManagement, Promotion)
   - initAdminData.ts
